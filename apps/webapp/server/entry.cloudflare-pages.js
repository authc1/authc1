import{getNotFound as se}from"./@qwik-city-not-found-paths.js";import{isStaticPath as oe}from"./@qwik-city-static-paths.js";import{_ as ce,a as le,v as fe}from"./assets/index.qwik-a5a7d423.js";import{s as ue,r as de,m as he}from"./assets/entry.ssr-6f59312c.js";import pe from"./@qwik-city-plan.js";var X=class extends Error{constructor(e,t){super(t),this.status=e}};function me(e,t){let r="Server Error";return t!=null&&(typeof t.message=="string"?r=t.message:r=String(t)),"<html>"+Y(e,r)+"</html>"}function Y(e,t){typeof e!="number"&&(e=500),typeof t=="string"?t=we(t):t="";const r=typeof t=="string"?"600px":"300px",a=e>=500?be:ye;return`
<head>
  <meta charset="utf-8">
  <meta http-equiv="Status" content="${e}">
  <title>${e} ${t}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { color: ${a}; background-color: #fafafa; padding: 30px; font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Roboto, sans-serif; }
    p { max-width: ${r}; margin: 60px auto 30px auto; background: white; border-radius: 4px; box-shadow: 0px 0px 50px -20px ${a}; overflow: hidden; }
    strong { display: inline-block; padding: 15px; background: ${a}; color: white; }
    span { display: inline-block; padding: 15px; }
  </style>
</head>
<body><p><strong>${e}</strong> <span>${t}</span></p></body>
`}var ge=/[&<>]/g,we=e=>e.replace(ge,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return""}}),ye="#006ce9",be="#713fc2",Se={lax:"Lax",none:"None",strict:"Strict"},xe={seconds:1,minutes:1*60,hours:1*60*60,days:1*60*60*24,weeks:1*60*60*24*7},Re=(e,t,r)=>{const a=[`${e}=${t}`];typeof r.domain=="string"&&a.push(`Domain=${r.domain}`),typeof r.maxAge=="number"?a.push(`Max-Age=${r.maxAge}`):Array.isArray(r.maxAge)?a.push(`Max-Age=${r.maxAge[0]*xe[r.maxAge[1]]}`):typeof r.expires=="number"||typeof r.expires=="string"?a.push(`Expires=${r.expires}`):r.expires instanceof Date&&a.push(`Expires=${r.expires.toUTCString()}`),r.httpOnly&&a.push("HttpOnly"),typeof r.path=="string"&&a.push(`Path=${r.path}`);const i=ke(r.sameSite);return i&&a.push(`SameSite=${i}`),r.secure&&a.push("Secure"),a.join("; ")},_e=e=>{const t={};if(typeof e=="string"&&e!==""){const r=e.split(";");for(const a of r){const i=a.split("=");i.length>1&&(t[decodeURIComponent(i[0].trim())]=decodeURIComponent(i[1].trim()))}}return t};function ke(e){if(e===!0)return"Strict";if(e===!1)return"None";if(e)return Se[e]}var k=Symbol("request-cookies"),j=Symbol("response-cookies"),x=Symbol("live-cookies"),V,Z,Te=class{constructor(e){this[V]={},this[Z]={},this[k]=_e(e),this[x]={...this[k]}}get(e,t=!0){const r=this[t?x:k][e];return r?{value:r,json(){return JSON.parse(r)},number(){return Number(r)}}:null}getAll(e=!0){return Object.keys(this[e?x:k]).reduce((t,r)=>(t[r]=this.get(r),t),{})}has(e,t=!0){return!!this[t?x:k][e]}set(e,t,r={}){this[x][e]=typeof t=="string"?t:JSON.stringify(t);const a=typeof t=="string"?t:encodeURIComponent(JSON.stringify(t));this[j][e]=Re(e,a,r)}delete(e,t){this.set(e,"deleted",{...t,maxAge:0}),this[x][e]=null}headers(){return Object.values(this[j])}};V=j,Z=x;var Ae=(e,t)=>{const r=t.headers();if(r.length>0){const a=new Headers(e);for(const i of r)a.append("Set-Cookie",i);return a}return e},W=class{},D=class extends W{},N=new WeakMap,U="qaction",ve="qfunc";function Pe(e){const{url:t,params:r,request:a,status:i,locale:o}=e,s={};a.headers.forEach((l,d)=>s[d]=l);const n=e.sharedMap.get($),u=e.sharedMap.get(ne),c=e.sharedMap.get(Qe);return{url:new URL(t.pathname+t.search,t).href,requestHeaders:s,locale:o(),nonce:c,qwikcity:{ev:e,params:{...r},loadedRoute:Ue(e),response:{status:i(),loaders:L(e),action:n,formData:u}}}}var We=(e,t,r,a)=>{const i=[],o=[],s=[],n=!!(t&&$e(t[1]));return e&&q(i,o,s,e,n,r),t&&(n&&(r==="POST"&&(s.unshift(Le),s.push(Me)),s.push(Oe),s.push(Ie)),q(i,o,s,t[1],n,r),n&&(i.length+B.length>0&&s.push(B(i,o)),s.push(a))),s},q=(e,t,r,a,i,o)=>{for(const s of a){typeof s.onRequest=="function"?r.push(s.onRequest):Array.isArray(s.onRequest)&&r.push(...s.onRequest);let n;switch(o){case"GET":{n=s.onGet;break}case"POST":{n=s.onPost;break}case"PUT":{n=s.onPut;break}case"PATCH":{n=s.onPatch;break}case"DELETE":{n=s.onDelete;break}case"OPTIONS":{n=s.onOptions;break}case"HEAD":{n=s.onHead;break}}if(typeof n=="function"?r.push(n):Array.isArray(n)&&r.push(...n),i){const u=Object.values(s).filter(l=>F(l,"server_loader"));e.push(...u);const c=Object.values(s).filter(l=>F(l,"server_action"));t.push(...c)}}},F=(e,t)=>e&&typeof e=="function"&&e.__brand===t;function B(e,t){return async r=>{if(r.headersSent){r.exit();return}const{method:a}=r,i=L(r),o=T(r)==="dev",s=r[C];if(o&&a==="GET"&&r.query.has(U)&&console.warn(`Seems like you are submitting a Qwik Action via GET request. Qwik Actions should be submitted via POST request.
Make sure you <form> has method="POST" attribute, like this: <form method="POST">`),a==="POST"){const n=r.query.get(U);if(n){const u=globalThis._qwikActionsMap,c=t.find(l=>l.__id===n)??(u==null?void 0:u.get(n));if(c){r.sharedMap.set($,n);const l=await r.parseBody();if(!l||typeof l!="object")throw new Error("Expected request data to be an object");const d=await J(r,c.__validators,l);if(!d.success)i[n]=r.fail(d.status??500,d.error);else{const m=await c.__qrl(d.data,r);o&&M(s,m,c.__qrl),i[n]=m}}}}e.length>0&&await Promise.all(e.map(n=>{const u=n.__id;if(o&&i[u])throw new Error(`Duplicate loader id "${u}" detected. Please ensure that all loader ids are unique.`);return i[u]=J(r,n.__validators,void 0).then(c=>c.success?n.__qrl(r):r.fail(c.status??500,c.error)).then(c=>(typeof c=="function"?i[u]=c():(o&&M(s,c,n.__qrl),i[u]=c),c))}))}}async function J(e,t,r){let a={success:!0,data:r};if(t)for(const i of t)if(a=await i.validate(e,r),a.success)r=a.data;else return a;return a}function De(e){return e&&typeof e=="object"&&Symbol.asyncIterator in e}async function Me(e){const t=e.query.get(ve);if(t&&e.request.headers.get("X-QRL")===t&&e.request.headers.get("Content-Type")==="application/qwik-json"){e.exit();const r=T(e)==="dev",a=e[C],i=await e.parseBody();if(Array.isArray(i)){const[o,...s]=i;if(Ce(o)&&o.getHash()===t){let n;try{n=await o.apply(e,s)}catch(u){e.headers.set("Content-Type","application/qwik-json"),e.send(500,await a._serializeData(u,!0));return}if(De(n)){e.headers.set("Content-Type","text/event-stream");const u=e.getWritableStream().getWriter();for await(const c of n){r&&M(a,c,o),e.headers.set("Content-Type","application/qwik-json");const l=await a._serializeData(c,!0);u.write(O.encode(`event: qwik
data: ${l}

`))}u.close()}else{M(a,n,o),e.headers.set("Content-Type","application/qwik-json");const u=await a._serializeData(n,!0);e.send(200,u)}return}}throw e.error(500,"Invalid request")}}function Oe(e){const t=z(e),{basePathname:r,pathname:a,url:i}=e;if(!ie(a)&&a!==r&&!a.endsWith(".html")){if(t){if(!a.endsWith("/"))throw e.redirect(302,a+"/"+i.search)}else if(a.endsWith("/"))throw e.redirect(302,a.slice(0,a.length-1)+i.search)}}function M(e,t,r){try{e._verifySerializable(t,void 0)}catch(a){throw a instanceof Error&&r.dev&&(a.loc=r.dev),a}}var Ce=e=>typeof e=="function"&&typeof e.getSymbol=="function";function $e(e){const t=e[e.length-1];return t&&typeof t.default=="function"}function E(e,t){return e.pathname.endsWith(R)?e.pathname.slice(0,-R.length+(t?1:0))+e.search:e.pathname}var O=new TextEncoder;function Le(e){const t=T(e)==="dev";let r=e.request.headers.get("origin"),a=e.url.origin;if(t&&(r=r?new URL(r).host:null,a=e.url.host),r!==a)throw e.error(403,`Cross-site ${e.request.method} form submissions are forbidden`)}function He(e){return async t=>{if(t.headersSent||t.pathname.endsWith(R))return;t.request.headers.forEach((d,m)=>d);const a=t.headers;a.has("Content-Type")||a.set("Content-Type","text/html; charset=utf-8");const i=z(t),{readable:o,writable:s}=new TextEncoderStream,n=t.getWritableStream(),u=o.pipeTo(n,{preventClose:!0}),c=s.getWriter(),l=t.status();try{const d=T(t)==="static",m=await e({base:t.basePathname+"build/",stream:c,serverData:Pe(t),containerAttributes:{["q:render"]:d?"static":""}}),g={loaders:L(t),action:t.sharedMap.get($),status:l!==200?l:200,href:E(t.url,i)};(typeof m).html==="string"&&await c.write(m.html),t.sharedMap.set("qData",g)}finally{await c.ready,await c.close(),await u}await n.close()}}async function Ie(e){if(ie(e.pathname)){try{await e.next()}catch(l){if(!(l instanceof D))throw l}if(e.headersSent||e.exited)return;const r=e.status(),a=e.headers.get("Location"),i=z(e);if(r>=301&&r<=308&&a){const l=je(a);if(l){e.headers.set("Location",l),e.getWritableStream().close();return}else e.status(200),e.headers.delete("Location")}e.request.headers.forEach((l,d)=>l),e.headers.set("Content-Type","application/json; charset=utf-8");const s={loaders:L(e),action:e.sharedMap.get($),status:r!==200?r:200,href:E(e.url,i),redirect:a??void 0},n=e.getWritableStream().getWriter(),c=await e[C]._serializeData(s,!0);n.write(O.encode(c)),e.sharedMap.set("qData",s),n.close()}}function je(e){if(e.startsWith("/")){const t=R,r=new URL(e,"http://localhost");return(r.pathname.endsWith("/")?r.pathname.slice(0,-1):r.pathname)+(t.startsWith("/")?"":"/")+t+r.search}else return}function ze(e){const t=[];return e==="day"?e=60*60*24:e==="week"?e=60*60*24*7:e==="month"?e=60*60*24*30:e==="year"?e=60*60*24*365:e==="private"?e={private:!0,noCache:!0}:e==="immutable"?e={public:!0,immutable:!0,maxAge:60*60*24*365,staleWhileRevalidate:60*60*24*365}:e==="no-cache"&&(e={noCache:!0}),typeof e=="number"&&(e={maxAge:e,sMaxAge:e,staleWhileRevalidate:e}),e.immutable&&t.push("immutable"),e.maxAge&&t.push(`max-age=${e.maxAge}`),e.sMaxAge&&t.push(`s-maxage=${e.sMaxAge}`),e.noStore&&t.push("no-store"),e.noCache&&t.push("no-cache"),e.private&&t.push("private"),e.public&&t.push("public"),e.staleWhileRevalidate&&t.push(`stale-while-revalidate=${e.staleWhileRevalidate}`),t.join(", ")}var ee=Symbol("RequestEvLoaders"),te=Symbol("RequestEvMode"),re=Symbol("RequestEvRoute"),C=Symbol("RequestEvQwikSerializer"),ae=Symbol("RequestEvTrailingSlash"),$="@actionId",ne="@actionFormData",Qe="@nonce";function Ne(e,t,r,a=!0,i="/",o,s){const{request:n,platform:u,env:c}=e,l=new Te(n.headers.get("cookie")),d=new Headers,m=new URL(n.url);let g=-1,h=null,y,A=e.locale,w=200;const H=async()=>{for(g++;g<r.length;){const f=r[g],p=f(S);p instanceof Promise&&await p,g++}},b=()=>{if(h!==null)throw new Error("Response already sent")},_=(f,p)=>{if(b(),typeof f=="number"){w=f;const P=S.getWritableStream().getWriter();P.write(typeof p=="string"?O.encode(p):p),P.close()}else if(w=f.status,f.headers.forEach((v,P)=>{d.append(P,v)}),f.body){const v=S.getWritableStream();f.body.pipeTo(v)}else{if(w>=300&&w<400)return new D;S.getWritableStream().getWriter().close()}return new W},I={},Q=new Map,S={[ee]:I,[te]:e.mode,[ae]:a,[re]:t,[C]:o,cookie:l,headers:d,env:c,method:n.method,params:(t==null?void 0:t[0])??{},pathname:m.pathname,platform:u,query:m.searchParams,request:n,url:m,basePathname:i,sharedMap:Q,get headersSent(){return h!==null},get exited(){return g>=K},next:H,exit:()=>(g=K,new W),cacheControl:f=>{b(),d.set("Cache-Control",ze(f))},resolveValue:async f=>{const p=f.__id;if(f.__brand==="server_loader"&&!(p in I))throw new Error("You can not get the returned data of a loader that has not been executed for this request.");return I[p]},status:f=>typeof f=="number"?(b(),w=f,f):w,locale:f=>(typeof f=="string"&&(A=f),A||""),error:(f,p)=>(w=f,d.delete("Cache-Control"),new X(f,p)),redirect:(f,p)=>(b(),w=f,d.set("Location",p),d.delete("Cache-Control"),f>301&&d.set("Cache-Control","no-store"),new D),defer:f=>typeof f=="function"?f:()=>f,fail:(f,p)=>(b(),w=f,d.delete("Cache-Control"),{failed:!0,...p}),text:(f,p)=>(d.set("Content-Type","text/plain; charset=utf-8"),_(f,p)),html:(f,p)=>(d.set("Content-Type","text/html; charset=utf-8"),_(f,p)),parseBody:async()=>y!==void 0?y:y=qe(S.request,Q,o),json:(f,p)=>(d.set("Content-Type","application/json; charset=utf-8"),_(f,JSON.stringify(p))),send:_,isDirty:()=>h!==null,getWritableStream:()=>(h===null&&(h=e.getWritableStream(w,d,l,s,S)),h)};return Object.freeze(S)}function L(e){return e[ee]}function z(e){return e[ae]}function Ue(e){return e[re]}function T(e){return e[te]}var K=999999999,qe=async(e,t,r)=>{var a;const i=e.clone(),o=((a=e.headers.get("content-type"))==null?void 0:a.split(/[;,]/,1)[0].trim())??"";if(o==="application/x-www-form-urlencoded"||o==="multipart/form-data"){const s=await i.formData();return t.set(ne,s),Fe(s)}else{if(o==="application/json")return await i.json();if(o==="application/qwik-json")return r._deserializeData(await i.text())}},Fe=e=>{const t={};return e.forEach((r,a)=>{const i=a.split(".").filter(s=>s);let o=t;for(let s=0;s<i.length;s++){let n=i[s];s===i.length-1?n.endsWith("[]")?(n=n.slice(0,-2),o[n]=o[n]||[],o[n].push(r)):o[n]=r:o=o[n]={...o[n]}}}),t};function Be(e,t,r,a=!0,i="/",o){let s;const n=new Promise(c=>s=c),u=Ne(e,t,r,a,i,o,s);return{response:n,requestEv:u,completion:Je(u,s)}}async function Je(e,t){try{await e.next()}catch(r){if(r instanceof D)await e.getWritableStream().close();else if(r instanceof X){if(console.error(r),!e.headersSent){const a=me(r.status,r);e.html(r.status,a)}}else if(!(r instanceof W)){if(T(e)!=="dev")try{e.headersSent||(e.headers.set("content-type","text/html; charset=utf-8"),e.cacheControl({noCache:!0}),e.status(500));const a=e.getWritableStream();if(!a.locked){const i=a.getWriter();await i.write(O.encode(Y(500,"Internal Server Error"))),await i.close()}}catch{console.error("Unable to render error page")}return r}}finally{e.isDirty()||t(null)}}function Ke(e,t){if(e.endsWith(R)){const r=e.length-Ge+(t?1:0);e=e.slice(0,r),e===""&&(e="/")}return e}var ie=e=>e.endsWith(R),R="/q-data.json",Ge=R.length,Xe=async(e,t,r,a)=>{if(Array.isArray(e))for(const i of e){const o=i[0].exec(a);if(o){const s=i[1],n=Ve(i[2],o),u=i[4],c=new Array(s.length),l=[],d=Ye(t,a);let m;return s.forEach((g,h)=>{G(g,l,y=>c[h]=y,r)}),G(d,l,g=>m=g==null?void 0:g.default,r),l.length>0&&await Promise.all(l),[n,c,m,u]}}return null},G=(e,t,r,a)=>{if(typeof e=="function"){const i=N.get(e);if(i)r(i);else{const o=e();typeof o.then=="function"?t.push(o.then(s=>{a!==!1&&N.set(e,s),r(s)})):o&&r(o)}}},Ye=(e,t)=>{if(e){t=t.endsWith("/")?t:t+"/";const r=e.find(a=>a[0]===t||t.startsWith(a[0]+(t.endsWith("/")?"":"/")));if(r)return r[1]}},Ve=(e,t)=>{const r={};if(e)for(let a=0;a<e.length;a++){const i=(t==null?void 0:t[a+1])??"",o=i.endsWith("/")?i.slice(0,-1):i;r[e[a]]=decodeURIComponent(o)}return r};async function Ze(e,t,r){const{render:a,qwikCityPlan:i}=t,{routes:o,serverPlugins:s,menus:n,cacheModules:u,trailingSlash:c,basePathname:l}=i,d=e.url.pathname,m=Ke(d,c),g=await Ee(s,o,n,u,m,e.request.method,a);return g?Be(e,g[0],g[1],c,l,r):null}async function Ee(e,t,r,a,i,o,s){const n=await Xe(t,r,a,i),u=We(e,n,o,He(s));return u.length>0?[n,u]:null}function et(e){globalThis.TextEncoderStream=rt;const t={_deserializeData:ce,_serializeData:le,_verifySerializable:fe};e.manifest&&ue(e.manifest);async function r({request:a,env:i,waitUntil:o,next:s}){try{const n=new URL(a.url);if(oe(a.method,n))return s();const u=n.hostname!=="127.0.0.1"&&n.hostname!=="localhost"&&n.port===""&&a.method==="GET",c=new Request(n.href,a),l=u?await caches.open("custom:qwikcity"):null;if(l){const h=await l.match(c);if(h)return h}const m=await Ze({mode:"server",locale:void 0,url:n,request:a,env:{get(h){return i[h]}},getWritableStream:(h,y,A,w)=>{const{readable:H,writable:b}=new TransformStream,_=new Response(H,{status:h,headers:Ae(y,A)});return w(_),b},platform:i},e,t);if(m){m.completion.then(y=>{y&&console.error(y)});const h=await m.response;if(h)return h.ok&&l&&h.headers.has("Cache-Control")&&o(l.put(c,h.clone())),h}const g=se(n.pathname);return new Response(g,{status:404,headers:{"Content-Type":"text/html; charset=utf-8","X-Not-Found":n.pathname}})}catch(n){return console.error(n),new Response(String(n||"Error"),{status:500,headers:{"Content-Type":"text/plain; charset=utf-8","X-Error":"cloudflare-pages"}})}}return r}var tt=Promise.resolve(),rt=class{constructor(){this._writer=null,this.readable={pipeTo:t=>{this._writer=t.getWriter()}},this.writable={getWriter:()=>{if(!this._writer)throw new Error("No writable stream");const t=new TextEncoder;return{write:async r=>{r!=null&&await this._writer.write(t.encode(r))},close:()=>this._writer.close(),ready:tt}}}}};const lt=et({render:de,qwikCityPlan:pe,manifest:he});export{lt as onRequest};
